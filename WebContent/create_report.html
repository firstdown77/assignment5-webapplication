<?xml version="1.0" encoding="US-ASCII" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="css/header.css" type="text/css" />
<script src="js/jquery-1.11.1.min.js"></script>
<script src="js/load_header.js"></script>
<script>
	function doGeoCode(address, lat, lon) {
		//If no latitude or longitude were provided and an address was provided,
		//then normal geocode, i.e. convert address to geo-coordinates.
		if ((($('#latitude').val() === "Latitude") || ($('#longitude').val() === "Longitude"))
				&& ($('#address').val() !== "Address")) {
			var result = $
					.ajax({
						url : "https://maps.googleapis.com/maps/api/geocode/json?address="
								+ address
								+ "&key=AIzaSyBPihpCUn2xSaRqNv9KM1_MEAf-iS6sJ-Q",
						type : "get",
						async : false,
						data : {}
					}).responseText;
			var lat = JSON.parse(result).results[0].geometry.location.lat;
			var lng = JSON.parse(result).results[0].geometry.location.lng;
			$('#latitude').val(lat);
			$('#longitude').val(lng);
		}
		//If no address was provided and a latitude and longitude were provided,
		//then reverse geocode, i.e. convert geo-coordinates to address.
		else if (($('#address').val() === "Address")
				&& ($('#latitude').val() !== "Latitude")
				&& ($('#longitude').val() !== "Longitude")) {
			var result = $
					.ajax({
						url : "https://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&key=AIzaSyBPihpCUn2xSaRqNv9KM1_MEAf-iS6sJ-Q",
						type : "get",
						async : false,
						data : {}
					}).responseText;
			var formatted_address = JSON.parse(result).results[0].formatted_address;
			$('#address').val(formatted_address);
		}
	}
</script>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII" />
<title>Create Report</title>
</head>
<body>
	<div id="header"></div>
	<h2 class="text-center">Create Report</h2>
	<br />
	<form name="input" action="view_report" method="post"
		class="text-center" enctype="multipart/form-data">
		<input type="text" name="title"
			onfocus="if (this.value==='Title') this.value=''" value="Title"
			onblur="if (this.value=='') this.value='Title'" /><br />
		<br /> <input type="text" size="50" name="address" id="address"
			onfocus="if (this.value==='Address') this.value=''" value="Address"
			onblur="if (this.value=='') this.value='Address'" /> &nbsp;&nbsp; Or &nbsp;&nbsp;
			<div style="display:inline; width: 10px;">
				<input type="text" name="latitude" id="latitude"
				onfocus="if (this.value==='Latitude') this.value=''" value="Latitude"
				onblur="if (this.value=='') this.value='Latitude'" />
				<input type="text" style="position:relative;" name="longitude" id="longitude"
				onfocus="if (this.value==='Longitude') this.value=''"
				value="Longitude" onblur="if (this.value=='') this.value='Longitude'" />
			</div><br />
		<br /> <input type="text" name="radius"
			onfocus="if (this.value==='Radius (km)') this.value=''" value="Radius (km)"
			onblur="if (this.value=='') this.value='Radius (km)'" /><br />
		<br />
		<center>
			Content: &nbsp;&nbsp;<input type="file" style="display:inline;" name="content"
				onfocus="if (this.value==='Content') this.value=''" value="Content"
				onblur="if (this.value=='') this.value='Content'" />
		</center>
		<br />
		<br /> <input type="submit"
			onclick="doGeoCode(document.getElementById('address').value, document.getElementById('latitude').value, document.getElementById('longitude').value)"
			value="Create Report" />
		<!-- 1600+Amphitheatre+Parkway,+Mountain+View,+CA -->
	</form>
</body>
</html>